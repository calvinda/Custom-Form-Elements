/* Custom Form Elements v0.13 / http://github.com/karbassi/Custom-Form-Elements / Written by Ali Karbassi (karbassi.com) */
(function(h,d,f){function g(a){this.init.call(this,a)}g.prototype={init:function(a){this.options=f.extend({},g.options,a||{});var a=d.getElementsByTagName("head")[0],b=d.createElement("style");b.type="text/css";var c=d.createTextNode("input."+this.options.cssClass+" { display: none; } select."+this.options.cssClass+", input."+this.options.cssClass+'[type=file] { position: relative; display: block; opacity: 0; -ms-filter:"progid:DXImageTransform.Microsoft.Alpha"(Opacity=0); filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0); filter:alpha(opacity=0); z-index: 5; } ');b.styleSheet?b.styleSheet.cssText=c.nodeValue:b.appendChild(c);a.appendChild(b);this.repaint()},repaint:function(){f("."+this.options.cssClass+"[type=checkbox], ."+this.options.cssClass+"[type=radio], ."+this.options.cssClass+"[type=file], ."+this.options.cssClass).each(function(){var a=f("#cfe-"+this.id+".cfe");a.length&&a.remove();var a=["cfe","cfe-"+("select-one"===this.type?"select":this.type),"select-one"!==this.type&&"file"!==this.type?"cfe-"+(this.checked?"state-2":"state-0"):"",this.disabled?"cfe-disabled":"",this.getAttribute("readonly")?"cfe-readonly":""].sort().join(" ").trim(),b=d.createElement("span");b.id="cfe-"+this.id;b.className=a;b.innerHTML=f(this).find("option:selected").text();this.parentNode.insertBefore(b,this);f("label[for="+this.id+"]").addClass("cfe")});this.bind()},bind:function(){var a=this;f(".cfe-radio, .cfe-checkbox").not(".cfe-disabled, .cfe-readonly").off(".cfe").on("mousedown.cfe",function(b){a.mousedown(this,b)}).on("mouseup.cfe",function(b){a.mouseup(this,b)});f("select."+a.options.cssClass+", input."+a.options.cssClass+"[type=file]").off(".cfe").on("change.cfe",a.change);f("label.cfe").off(".cfe").on("click.cfe",function(a){a.preventDefault()}).on("mousedown.cfe",function(b){var c=d.getElementById("cfe-"+this.getAttribute("for"));b.target!==c&&0>c.className.indexOf("cfe-disabled")&&a.mousedown(c,b)}).on("mouseup.cfe",function(b){var c=d.getElementById("cfe-"+this.getAttribute("for"));b.target!==c&&0>c.className.indexOf("cfe-disabled")&&a.mouseup(c,b)})},mousedown:function(a,b){if(b.isTrigger||1===b.which){var c=d.getElementById(a.id.split("cfe-").pop());this.setState(a,c.checked?3:1)}},mouseup:function(a,b){if(b.isTrigger||1===b.which){var c=this,e=d.getElementById(a.id.split("cfe-").pop());"radio"===e.type&&!0===e.checked?this.setState(a,2):(f("."+this.options.cssClass+"[type=radio][name="+e.name+"]").not(":disabled, .cfe-disabled, #"+e.id).each(function(){c.setState(d.getElementById("cfe-"+this.id),0)}),this.setState(a,e.checked?0:2),b.isTrigger||(e.checked=!e.checked),f(e).trigger("change"))}},change:function(){var a=this.options[this.selectedIndex].text;"file"===this.type&&(a=this.value.replace(/C:\\fakepath\\/,""));d.getElementById("cfe-"+this.id).innerHTML=a},setState:function(a,b){a.className=a.className.replace(/(?:^|\s)cfe-state-\d(?!\S)/,"");a.className+=" cfe-state-"+b}};g.options={cssClass:"cfe-styled"};h.CustomFormElements=g;String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});Function.prototype.bind||(Function.prototype.bind=function(a){if(typeof this!=="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,e=function(){},d=function(){return c.apply(this instanceof e?this:a||h,b.concat(Array.prototype.slice.call(arguments)))};e.prototype=this.prototype;d.prototype=new e;return d})})(window,document,jQuery);
